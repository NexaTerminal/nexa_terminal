/**
 * Insert "Удел во друштвото" Course
 * Educational course about company shares in Macedonian law
 */

const { MongoClient, ObjectId } = require('mongodb');

const MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/nexa';

const courseData = {
  _id: new ObjectId(),
  title: 'Удел во друштвото',
  slug: 'udel-vo-drushtvo',
  description: 'Комплетен курс за разбирање на уделот во друштвото, правата на сопствениците, процесот на стекнување и пренесување на удели, и излез од друштвото.',
  category: 'Деловно право',
  level: 'Intermediate',
  duration: '2-3 часа',
  thumbnail: '/images/courses/udel-vo-drushtvo.jpg',
  instructor: {
    name: 'Nexa Legal Team',
    title: 'Правни експерти'
  },
  published: true,
  createdAt: new Date(),
  updatedAt: new Date(),

  sections: [
    // ==================== SECTION 1 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 1,
      title: 'Вовед во концептот на удел',
      description: 'Основни концепти за уделот во друштвото и неговото значење во македонското право',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Вовед во концептот на удел',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=a4t7n8-Zfpk',
          duration: '15 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Што е удел во друштвото',
          type: 'text',
          content: `Уделот во друштвото претставува основна единица на сопственост во трговско друштво со ограничена одговорност (ДООЕЛ). Тој го изразува процентуалното учество на еден сопственик во капиталот на друштвото и директно ги одредува правата и обврските на тој сопственик.

Според Законот за трговски друштва на Република Северна Македонија, уделот е нематеријално право кое му овозможува на сопственикот да учествува во управувањето со друштвото, да добива дивиденди од остварената добивка, и да има право на ликвидациска вредност при престанок на друштвото.

Вредноста на уделот се определува врз основа на висината на внесениот капитал. На пример, доколку друштвото има основен капитал од 5.000 евра, а еден сопственик има удел од 2.000 евра, тогаш неговото учество изнесува 40%. Ова процентуално учество е клучно за определување на гласачката моќ на собранието на сопствениците.

Важно е да се напомене дека уделот не е акција. За разлика од акционерските друштва каде акциите можат слободно да се тргуваат на берза, уделите во ДООЕЛ се предмет на построги ограничувања при пренесување. Законот предвидува право на претпочитание за останатите сопственици, што значи дека пред да се продаде удел на надворешно лице, мора прво да им се понуди на постоечките сопственици.

Разбирањето на природата на уделот е од клучно значење за секој претприемач или инвеститор што планира да основа или да инвестира во друштво со ограничена одговорност во Македонија.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Видови на удели и нивно значење',
          type: 'text',
          content: `Иако македонското законодавство не предвидува формални класи на удели како во некои други правни системи, во практиката постојат различни видови удели кои произлегуваат од договорните аранжмани меѓу сопствениците.

Обични удели се најчест вид на удели и носат стандардни права - право на глас пропорционално на учеството, право на дивиденда според учеството во капиталот, и право на ликвидациска вредност. Овие удели се основа на секој ДООЕЛ и секој сопственик има еднакви права во однос на другите, пропорционално на големината на неговиот удел.

Преференцијални удели може да се креираат преку договорна регулатива во Основачкиот акт или Статутот на друштвото. Овие удели можат да имаат приоритет при исплата на дивиденди, посебни гласачки права, или поголема застапеност во органите на управување. На пример, инвеститорите често бараат вакви удели за да заштитат свои интереси.

Мнозинските удели се оние кои надминуваат 50% од капиталот на друштвото и носат контрола над одлучувањето. Сопственикот на мнозински удел има моќ да донесува клучни одлуки за друштвото, вклучувајќи избор на директор, одобрување на финансиски извештаи, и стратешки насоки.

Малцинските удели се помали од 50% но сепак можат да имаат значајни права според законот. Малцинските сопственици се заштитени со одредби што бараат квалификувано мнозинство (на пример 75%) за одредени важни одлуки како што се измени на Основачкиот акт, зголемување или намалување на капиталот, или продажба на целото друштво.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Основни концепти',
          type: 'quiz',
          questions: [
            {
              question: 'Што претставува уделот во друштвото со ограничена одговорност (ДООЕЛ)?',
              options: [
                'Материјално добро кое може да се тргува на берза',
                'Нематеријално право кое ги изразува сопственичките права во друштвото',
                'Обврзница издадена од друштвото',
                'Договор за заем помеѓу сопственикот и друштвото'
              ],
              correctAnswer: 1,
              explanation: 'Уделот е нематеријално право кое го изразува процентуалното учество на сопственикот во капиталот на друштвото и ги определува неговите права и обврски.'
            },
            {
              question: 'Доколку друштво има основен капитал од 10.000 евра, а еден сопственик има удел од 3.000 евра, колку изнесува неговото процентуално учество?',
              options: [
                '10%',
                '30%',
                '50%',
                '70%'
              ],
              correctAnswer: 1,
              explanation: 'Процентуалното учество се пресметува како: (3.000 / 10.000) × 100 = 30%'
            },
            {
              question: 'Која е основната разлика помеѓу удел и акција?',
              options: [
                'Уделот може слободно да се продава на берза, акцијата не може',
                'Уделот е подложен на построги ограничувања при пренесување, за разлика од акцијата',
                'Уделот носи поголеми права од акцијата',
                'Нема разлика, тоа се синоними'
              ],
              correctAnswer: 1,
              explanation: 'Уделите во ДООЕЛ се предмет на построги ограничувања при пренесување (вклучувајќи право на претпочитание), додека акциите можат послободно да се тргуваат.'
            },
            {
              question: 'Што е право на претпочитание при продажба на удел?',
              options: [
                'Правото на купувачот да преговара за цената',
                'Правото на постоечките сопственици да го купат уделот пред да се понуди на надворешно лице',
                'Правото на друштвото да го одбие купувачот',
                'Правото на продавачот да го продаде уделот по секоја цена'
              ],
              correctAnswer: 1,
              explanation: 'Правото на претпочитание е законско право на постоечките сопственици да имаат прва можност да го купат уделот пред да се продаде на надворешно лице.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 2 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 2,
      title: 'Права на сопствениците на удели',
      description: 'Имотни и неимотни права што произлегуваат од сопственоста на удел',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Права на сопствениците',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=5p4v5B46wvg',
          duration: '18 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Имотни права на сопствениците',
          type: 'text',
          content: `Имотните права на сопствениците на удели се основни права кои се однесуваат на финансиските бенефиции што произлегуваат од сопственоста на уделот во друштвото.

Правото на дивиденда е најважното имотно право. Кога друштвото оствари нето добивка по данок и донесе одлука за распределба на дивиденда, секој сопственик има право на дивиденда пропорционално на неговиот удел. На пример, доколку друштво одлучи да распредели 50.000 денари дивиденда, а некој сопственик има 20% удел, тој има право на 10.000 денари. Важно е да се напомене дека дивидендата не е автоматска - Собранието на сопствениците мора да донесе одлука за нејзина распределба.

Правото на ликвидациска вредност се активира кога друштвото престанува со работа. По исплата на сите обврски на друштвото (долгови кон добавувачи, кредитори, данок), преостанатиот капитал се распределува меѓу сопствениците пропорционално на нивните удели. Ова е важна гаранција дека сопственикот нема да го изгуби целиот свој влог доколку друштвото мора да се затвори.

Правото на учество во зголемувањето на капиталот е исто така имотно право. Кога друштвото одлучи да го зголеми основниот капитал, постоечките сопственици имаат приоритетно право да учествуваат во ова зголемување пропорционално на нивните постоечки удели. Ова ги штити од разводнување на нивното учество.

Даночниот третман на овие имотни права е регулиран со Законот за данок на добивка и Законот за персонален данок на доход. Дивидендите подлежат на данок по стапка од 10% за физички лица.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Неимотни права и гласачка моќ',
          type: 'text',
          content: `Неимотните права се оние права на сопствениците кои не се директно финансиски, но се од клучно значење за управувањето и контролата врз друштвото.

Правото на глас е централно неимотно право. На Собранието на сопствениците, секој сопственик има право да гласа пропорционално на својот удел во капиталот. Доколку сопственикот има 25% удел, тој има 25% од гласовите. Одлуките на Собранието обично се донесуваат со обично мнозинство (над 50% од гласовите), но за важни прашања како измени на Основачкиот акт или продажба на друштвото, потребно е квалификувано мнозинство од 75% или повеќе.

Правото на информации му овозможува на секој сопственик да бара и да добие информации за работењето на друштвото, вклучувајќи пристап до финансиски извештаи, договори, одлуки на органите, и другa релевантна документација. Ова право е фундаментално за транспарентност и одговорност на управувањето.

Правото на свикување вонредно собрание е значајно за малцинските сопственици. Доколку сопственици кои поседуваат барем 20% од капиталот побараат свикување на Собрание, директорот е должен да го свика во рок од 15 дена. Ова им овозможува на малцинските сопственици да иницираат дискусија за важни прашања.

Заштитата на малцински сопственици е законски гарантирана преку неколку механизми: право на поднесување тужба против одлуки што се донесени спротивно на закон или Статутот, право на побарување на проверка (ревизија) на финансиското работење, и можност за побарување судско исклучување на мнозинскиот сопственик во случај на злоупотреба на мнозинската позиција.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Права на сопствениците',
          type: 'quiz',
          questions: [
            {
              question: 'Кој орган одлучува за распределба на дивиденда во друштво?',
              options: [
                'Директорот на друштвото',
                'Собранието на сопствениците',
                'Надзорниот одбор',
                'Даночната управа'
              ],
              correctAnswer: 1,
              explanation: 'Собранието на сопствениците е единствениот орган овластен да донесе одлука за распределба на дивиденда од остварената добивка на друштвото.'
            },
            {
              question: 'Колкава е даночната стапка на дивиденди за физички лица во Северна Македонија?',
              options: [
                '5%',
                '10%',
                '15%',
                '18%'
              ],
              correctAnswer: 1,
              explanation: 'Според Законот за персонален данок на доход, дивидендите се облагаат со данок по стапка од 10% за физички лица.'
            },
            {
              question: 'Какво мнозинство е потребно за донесување одлука за измена на Основачкиот акт?',
              options: [
                'Обично мнозинство (50%+1 глас)',
                'Квалификувано мнозинство (обично 75%)',
                'Едногласно (100%)',
                'Одлучува само директорот'
              ],
              correctAnswer: 1,
              explanation: 'За важни одлуки како измени на Основачкиот акт, Законот за трговски друштва предвидува квалификувано мнозинство од 75% од гласовите.'
            },
            {
              question: 'Колкав процент од капиталот треба да поседуваат малцинските сопственици за да можат да побараат свикување на вонредно собрание?',
              options: [
                'Барем 10%',
                'Барем 20%',
                'Барем 33%',
                'Барем 51%'
              ],
              correctAnswer: 1,
              explanation: 'Според Законот за трговски друштва, сопственици кои поседуваат барем 20% од капиталот можат да побараат свикување на вонредно Собрание на сопствениците.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 3 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 3,
      title: 'Стекнување на удел',
      description: 'Начини и постапки за стекнување на удел во друштво',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Стекнување на удел',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=u9lO1urcGLI',
          duration: '20 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Начини на стекнување удел',
          type: 'text',
          content: `Постојат два основни начини на стекнување удел во друштво - оригинерно и деривативно стекнување. Секој од овие начини има различни правни и практични импликации.

Оригинерното стекнување настанува кога се креира нов удел. Ова се случува при основање на друштво, кога основачите стануваат првични сопственици со внесување на основниот капитал. На пример, ако тројца основачи одлучат да основаат ДООЕЛ со основен капитал од 6.000 евра и секој внесе по 2.000 евра, секој од нив оригинерно ќе стекне удел од 33.33%. Исто така, оригинерно стекнување настанува и при зголемување на капиталот на постоечко друштво, кога постоечките или нови сопственици внесуваат дополнителен капитал.

Деривативното стекнување настанува кога постоечки удел се пренесува од еден сопственик на друг. Ова може да биде преку купопродажба, каде што купувачот го стекнува уделот за договорена цена. Цената зависи од неколку фактори - профитабилност на друштвото, вредност на средствата, пазарни услови, и преговарачката моќ на страните.

Друг начин на деривативно стекнување е наследување. Кога сопственик на удел почине, уделот преминува на неговите наследници според законот за наследување или според оставинска изјава. Наследниците имаат право да го задржат уделот или да го продадат.

Подарување на удел е исто така можно, особено кај семејни бизниси каде родителите сакаат да го пренесат уделот на своите деца. Ова бара нотарски акт и е предмет на данок на подарок. Давање на удел како влог во друго друштво е релативно редок, но легален начин на пренесување на удел.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Правни формалности и постапки',
          type: 'text',
          content: `Стекнувањето на удел бара исполнување на низа правни формалности за да биде валидно и правно обврзувачко.

Договорот за пренесување на удел мора да биде склучен во пишана форма. Иако законот не бара задолжителна нотарска форма за самиот договор, во практиката се препорачува договорот да биде нотарски заверен за да се избегнат идни спорови. Договорот мора да содржи: идентификација на страните, прецизна идентификација на уделот (број, процент), договорена цена или начин на нејзино определување, и услови за плаќање.

Согласност на Собранието на сопствениците е обично потребна пред да се изврши пренесување на удел на надворешно лице (лице кое не е веќе сопственик). Собранието може да го одобри или одбие предложениот купувач. Ако Собранието го одбие, постоечките сопственици имаат право да го откупат уделот по понудената цена (право на претпочитание).

Регистрацијата во Централниот регистар на Република Северна Македонија е задолжителна за да пренесувањето стане правно ефективно кон трети лица. Потребни документи вклучуваат: нотарски заверен договор за пренесување, доказ за уплатена цена, одлука на Собранието на сопствениците за одобрување на пренесувањето, и измени и дополнувања на Основачкиот акт доколку е потребно.

Даночни обврски при стекнување на удел вклучуваат данок на капитална добивка за продавачот (доколку уделот се продава со добивка), и административни такси за регистрација. Купувачот нема директен данок при купување, но треба да води сметка за идни даночни обврски врзани за сопственоста (данок на дивиденда).`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Стекнување на удел',
          type: 'quiz',
          questions: [
            {
              question: 'Што е оригинерно стекнување на удел?',
              options: [
                'Купување на постоечки удел од друг сопственик',
                'Стекнување на удел при основање на друштво или зголемување на капиталот',
                'Наследување на удел од родител',
                'Подарување на удел'
              ],
              correctAnswer: 1,
              explanation: 'Оригинерното стекнување настанува кога се креира нов удел - при основање на друштвото или зголемување на капиталот.'
            },
            {
              question: 'Во која форма мора да биде склучен договорот за пренесување на удел?',
              options: [
                'Усна форма е доволна',
                'Пишана форма',
                'Задолжително нотарска форма',
                'Електронска форма со дигитален потпис'
              ],
              correctAnswer: 1,
              explanation: 'Договорот за пренесување на удел мора да биде склучен во пишана форма. Иако нотарска форма не е задолжителна, таа се препорачува.'
            },
            {
              question: 'Што е право на претпочитание?',
              options: [
                'Правото на купувачот да преговара за цена',
                'Правото на постоечките сопственици да го откупат уделот пред да се продаде на надворешно лице',
                'Правото на директорот да го одбие купувачот',
                'Правото на продавачот да го продаде по секоја цена'
              ],
              correctAnswer: 1,
              explanation: 'Правото на претпочитание е законско право на постоечките сопственици да имаат приоритет да го купат уделот пред да се понуди на надворешно лице.'
            },
            {
              question: 'Каде мора да се регистрира пренесувањето на удел за да стане правно ефективно?',
              options: [
                'Во даночна управа',
                'Во Централниот регистар на РСМ',
                'Во општинска управа',
                'Не е потребна регистрација'
              ],
              correctAnswer: 1,
              explanation: 'Пренесувањето на удел мора да се регистрира во Централниот регистар на Република Северна Македонија за да биде правно ефективно кон трети лица.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 4 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 4,
      title: 'Пренесување и отуѓување на удел',
      description: 'Процес на продажба, даночни импликации и ограничувања',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Пренесување на удел',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=rrEvyJrMMWw',
          duration: '22 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Процес на продажба на удел',
          type: 'text',
          content: `Продажбата на удел е комплексен процес кој вклучува неколку фази и мора да ги почитува законските процедури и договорните обврски помеѓу сопствениците.

Првата фаза е намера за продажба и известување. Сопственикот кој сака да го продаде својот удел мора писмено да ги извести останатите сопственици и друштвото за својата намера. Ова известување мора да содржи детали за предложената продажба - цена, купувач (доколку е веќе идентификуван), и услови за плаќање. Периодот за одговор на постоечките сопственици обично е 30 дена.

Право на претпочитание се активира по известувањето. Постоечките сопственици имаат право да го купат уделот под истите услови што се понудени на надворешен купувач. Доколку повеќе сопственици се заинтересирани, уделот се распределува помеѓу нив пропорционално на нивните постоечки удели, освен ако не се договорат поинаку. Доколку постоечките сопственици не ја искористат оваа можност во предвидениот рок, продавачот може да пристапи кон продажба на надворешно лице.

Одобрување на Собранието е следна фаза. Доколку уделот се продава на надворешно лице, потребна е одлука на Собранието на сопствениците за одобрување на новиот сопственик. Собранието може да го одбие предложениот купувач, но во тој случај постоечките сопственици мораат да го откупат уделот по понудената цена.

Due diligence процесот е важен за купувачот. Купувачот треба темелно да ги провери финансиските извештаи на друштвото, договорни обврски, судски постапки, даночни обврски, и други релевантни информации пред да ја финализира трансакцијата.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Даночни импликации и ограничувања',
          type: 'text',
          content: `Пренесувањето на удел има значајни даночни импликации и за продавачот и за купувачот, како и одредени законски ограничувања што мораат да се почитуваат.

Данок на капитална добивка е главната даночна обврска за продавачот. Доколку уделот се продава по цена повисока од цената по која е стекнат, разликата претставува капитална добивка која се облагодановува. Стапката на данок на капитална добивка за физички лица е 15%. На пример, доколку сопственик купил удел за 50.000 денари и го продава за 100.000 денари, капиталната добивка од 50.000 денари подлежи на данок од 7.500 денари.

Даночна основа се определува како разлика помеѓу продажната цена и набавната вредност (цена по која е стекнат уделот), намалена за документирани трошоци поврзани со продажбата (адвокатски хонорари, нотарски трошоци). Важно е продавачот да ги чува сите релевантни документи за докажување на набавната вредност.

Данок на пренос на имот не се применува за пренесување на удели, бидејќи уделот не е материјално добро туку нематеријално право. Меѓутоа, административни такси за регистрација во Централниот регистар се должат.

Ограничувања при пренесување може да бидат дополнително уредени во Основачкиот акт или Статутот на друштвото. Честа клаузула е забрана за продажба на удел на конкуренти, или обврска за задржување на уделот за одреден период (lock-up период). Исто така, може да постојат drag-along и tag-along клаузули кои ги регулираат правата на сопствениците при голема продажба.

Нотарски трошоци и трошоци за правна помош обично се сносени од двете страни или како што е договорено. Препорачливо е ангажирање на адвокат за изработка на договорот и следење на целата постапка.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Пренесување на удел',
          type: 'quiz',
          questions: [
            {
              question: 'Колкав е рокот за одговор на постоечките сопственици по известувањето за продажба на удел?',
              options: [
                '15 дена',
                '30 дена',
                '60 дена',
                '90 дена'
              ],
              correctAnswer: 1,
              explanation: 'Постоечките сопственици обично имаат 30 дена да одговорат дали сакаат да го искористат правото на претпочитание.'
            },
            {
              question: 'Колкава е даночната стапка на капитална добивка за физички лица при продажба на удел?',
              options: [
                '10%',
                '15%',
                '18%',
                '20%'
              ],
              correctAnswer: 1,
              explanation: 'Данокот на капитална добивка за физички лица изнесува 15% од добивката при продажба на удел.'
            },
            {
              question: 'Што се случува доколку Собранието на сопствениците го одбие предложениот купувач?',
              options: [
                'Продажбата автоматски се откажува',
                'Постоечките сопственици мораат да го откупат уделот по понудената цена',
                'Продавачот може да го задржи уделот без продажба',
                'Купувачот може да тужи за дискриминација'
              ],
              correctAnswer: 1,
              explanation: 'Доколку Собранието го одбие купувачот, постоечките сопственици се обврзани да го откупат уделот под истите услови што се понудени на надворешниот купувач.'
            },
            {
              question: 'Дали се плаќа данок на пренос на имот при продажба на удел?',
              options: [
                'Да, стапката е 4%',
                'Да, стапката е 2%',
                'Не, бидејќи уделот не е материјално добро',
                'Зависи од вредноста на уделот'
              ],
              correctAnswer: 2,
              explanation: 'Данок на пренос на имот не се применува за пренесување на удели бидејќи уделот е нематеријално право, не материјално добро.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 5 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 5,
      title: 'Вреднување на уделот',
      description: 'Методи за утврдување на фер вредност на уделот',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Вреднување на удел',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=zLYfz4beXFQ',
          duration: '25 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Методи за вреднување на удели',
          type: 'text',
          content: `Вреднувањето на удел е критичен процес при купопродажба, наследување, или решавање на спорови помеѓу сопствениците. Постојат неколку методи за вреднување, секоја со свои предности и недостатоци.

Книговодствената метода е наједноставна и се заснова на билансот на состојба на друштвото. Вредноста на уделот се пресметува како процент од нето вредноста на друштвото (вкупна актива минус вкупни обврски). На пример, ако друштво има нето вредност од 500.000 денари, а некој сопственик има 20% удел, книговодствената вредност на неговиот удел е 100.000 денари. Овој метод е лесен за применување но не ги зема предвид идните приходи или нематеријалните средства како што се goodwill или брендот на компанијата.

Методот на дисконтиран паричен тек (DCF) е посложена и почесто користена метода. Таа ја проценува вредноста на друштвото врз основа на идните очекувани парични текови, дисконтирани на сегашна вредност. Овој метод бара проекции на приходи, трошоци, и инвестиции за следните 5-10 години, и определување на соодветна дисконтна стапка. Иако е математички прецизна, оваа метода е чувствителна на претпоставките и бара експертиза.

Компаративна пазарна метода (мултипликатори) споредува друштвото со слични компании во истата индустрија. Се користат мултипликатори како Price/Earnings (P/E), Price/Sales, или EV/EBITDA. На пример, ако слични компании се тргуваат на P/E мултипликатор од 10, а друштвото има годишна добивка од 50.000 денари, неговата проценета вредност е 500.000 денари.

Ликвидациона вредност е конзервативна метода што ја проценува вредноста која би се добила доколку сите средства на друштвото се продадат и сите долгови се платат.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Фактори што влијаат на вредноста',
          type: 'text',
          content: `Вредноста на удел не зависи само од финансиските показатели, туку и од бројни други фактори што можат значително да влијаат на конечната проценка.

Профитабилноста и финансиската стабилност се најважни фактори. Друштво кое константно генерира добивка и има здрав паричен тек ќе има повисока вреднување од друштво со губитоци или нестабилни приходи. Историските финансиски резултати за последните 3-5 години даваат индикација за трендовите и стабилноста на бизнисот.

Потенцијалот за раст е исто така клучен. Друштво во растечка индустрија, со иновативни производи или услуги, и со силна конкурентна позиција, вреди повеќе од друштво во стагнантна или опаѓачка индустрија. Инвеститорите се подготвени да платат премија за друштва со висок потенцијал за раст.

Управувачкиот тим и корпоративното управување се често потценети фактори. Квалитетно, искусно раководство и добри системи за контрола и транспарентност го зголемуваат довербата на инвеститорите и придонесуваат кон повисока вредност.

Позиција на уделот - дали е мнозински или малцински удел - има огромно влијание на цената. Мнозинскиот удел носи контрола врз друштвото и затоа се продава со "контролна премија" од 20-40% над пропорционалната вредност. Малцинските удели се продаваат со "малцински дисконт" од 20-30% под пропорционалната вредност, бидејќи купувачот нема контрола.

Ликвидноста на уделот - колку брзо и лесно може да се продаде - исто така влијае на вредноста. Удели во приватни компании се помалку ликвидни од акции на јавни компании, и затоа се продаваат со дисконт.

Договорни ограничувања како lock-up периоди, право на претпочитание, или drag-along клаузули можат да ја намалат привлечноста и вредноста на уделот.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Вреднување на удел',
          type: 'quiz',
          questions: [
            {
              question: 'Која метода за вреднување на удел се заснова на билансот на состојба?',
              options: [
                'DCF метода',
                'Книговодствена метода',
                'Компаративна пазарна метода',
                'Метод на мултипликатори'
              ],
              correctAnswer: 1,
              explanation: 'Книговодствената метода се заснова на билансот на состојба и ја пресметува вредноста како процент од нето вредноста (актива минус обврски).'
            },
            {
              question: 'Што е DCF метода за вреднување?',
              options: [
                'Директна компаративна формула',
                'Метод на дисконтиран паричен тек',
                'Дополнителна цена за финансирање',
                'Данок на капитална форма'
              ],
              correctAnswer: 1,
              explanation: 'DCF (Discounted Cash Flow) е метод на дисконтиран паричен тек кој ја проценува вредноста врз основа на идните очекувани парични текови.'
            },
            {
              question: 'Колкава е типичната "контролна премија" за мнозински удел?',
              options: [
                '5-10%',
                '20-40%',
                '50-60%',
                '70-80%'
              ],
              correctAnswer: 1,
              explanation: 'Мнозинските удели обично се продаваат со контролна премија од 20-40% над пропорционалната вредност, бидејќи носат контрола врз друштвото.'
            },
            {
              question: 'Зошто малцинските удели се продаваат со дисконт?',
              options: [
                'Затоа што се помали по вредност',
                'Затоа што купувачот нема контрола врз друштвото',
                'Затоа што законот го бара тоа',
                'Затоа што се полесно преносливи'
              ],
              correctAnswer: 1,
              explanation: 'Малцинските удели се продаваат со дисконт од 20-30% бидејќи купувачот нема контрола врз управувањето и стратешките одлуки на друштвото.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 6 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 6,
      title: 'Договори за соработка меѓу сопствениците',
      description: 'Акционерски договори, drag-along и tag-along клаузули',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Акционерски договори',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=71IeHkiVcuk',
          duration: '20 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Договори за гласање и управување',
          type: 'text',
          content: `Акционерските договори (Shareholder Agreements) се приватни договори помеѓу сопствениците на друштво кои ги регулираат нивните меѓусебни односи, надвор од она што е уредено со Основачкиот акт или Статутот.

Договор за гласање (Voting Agreement) е тип на акционерски договор каде сопствениците се согласуваат како ќе гласаат на Собранието за одредени прашања. На пример, малцински сопственици можат да се здружат и да се договорат да гласаат заедно за да формираат блокирачко мнозинство од 26% кое може да спречи одлуки што бараат квалификувано мнозинство. Договорот за гласање може да содржи обврска за консултации пред Собранието, заеднички став по клучни прашања, и механизам за разрешување на несогласувања.

Договор за управување (Management Agreement) оди чекор понатаму и ги регулира улогите на сопствениците во управувањето со друштвото. Тој може да предвидува дека одреден сопственик ќе биде директор, или дека важни одлуки (како инвестиции над одреден износ, заем, продажба на средства) бараат согласност на сите сопственици или одредено мнозинство кое е повисоко од законското.

Заштита на малцински сопственици е честа содржина на овие договори. Може да се предвиди дека одредени одлуки (на пример, зголемување на капитал, прием на нов сопственик, продажба на друштво) бараат единогласна согласност, што му дава вето право на малцинскиот сопственик. Исто така може да се договори редовно известување на малцинските сопственици со финансиски извештаи и други релевантни информации.

Договор за нераспределба на дивиденда може да предвидува дека друштвото нема да распределува дивиденда во првите неколку години, туку ќе реинвестира добивката за раст на бизнисот.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Drag-along и Tag-along клаузули',
          type: 'text',
          content: `Drag-along и tag-along клаузулите се механизми кои ги регулираат правата на сопствениците при продажба на друштвото, и се клучни за заштита на интересите на двете страни - мнозинските и малцинските сопственици.

Drag-along клаузулата ("повлечи со себе") му овозможува на мнозинскиот сопственик, доколку добие атрактивна понуда за купување на целото друштво, да ги принуди малцинските сопственици да ги продадат своите удели под истите услови. На пример, ако некој сака да купи 100% од друштвото по цена од 10 милиони денари, а мнозинскиот сопственик има 70% и малцинските имаат 30%, мнозинскиот може да ги принуди малцинските да продадат за да се овозможи целосната трансакција. Ова е важно бидејќи купувачите често сакаат 100% сопственост и нема да купат само мнозински удел.

Условите за drag-along обично предвидуваат дека малцинските сопственици ќе добијат иста цена по удел како мнозинскиот, истите гаранции и заштити, и разумен период за разгледување на договорот. Исто така, обично се предвидува минимална цена или минимална вредност на трансакцијата за да се активира drag-along.

Tag-along клаузулата ("тагувај со") е заштитен механизам за малцинските сопственици. Таа им дава право на малцинските сопственици, доколку мнозинскиот сопственик продава свој удел, да ги продадат и своите удели под истите услови. На пример, ако мнозинскиот сопственик добие понуда од 100 денари по удел, малцинските сопственици можат да побараат да ги продадат своите удели по иста цена.

Практичната примена на tag-along често вклучува предвидување дека купувачот мора да биде подготвен да купи пропорционален дел од малцинските удели. Доколку купувачот не сака да купи толку, трансакцијата може да се намали пропорционално за сите сопственици.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Акционерски договори',
          type: 'quiz',
          questions: [
            {
              question: 'Што е акционерски договор (Shareholder Agreement)?',
              options: [
                'Јавен документ регистриран во Централен регистар',
                'Приватен договор помеѓу сопствениците што ги регулира нивните меѓусебни односи',
                'Договор помеѓу друштвото и клиентите',
                'Законска обврска за сите друштва'
              ],
              correctAnswer: 1,
              explanation: 'Акционерскиот договор е приватен договор помеѓу сопствениците кој ги регулира нивните права и обврски надвор од она што е уредено со Основачкиот акт.'
            },
            {
              question: 'Што овозможува drag-along клаузулата?',
              options: [
                'Малцинските сопственици да ги принудат мнозинските да продадат',
                'Мнозинскиот сопственик да ги принуди малцинските да продадат при продажба на целото друштво',
                'Директорот да продаде удели без согласност',
                'Друштвото да откупи удели од сопствениците'
              ],
              correctAnswer: 1,
              explanation: 'Drag-along клаузулата му овозможува на мнозинскиот сопственик да ги принуди малцинските сопственици да ги продадат своите удели при продажба на целото друштво.'
            },
            {
              question: 'Што е tag-along клаузула?',
              options: [
                'Обврска на мнозинскиот сопственик да продаде',
                'Право на малцинските сопственици да ги продадат своите удели под исти услови како мнозинскиот',
                'Забрана за продажба на удели',
                'Договор за гласање'
              ],
              correctAnswer: 1,
              explanation: 'Tag-along клаузулата им дава право на малцинските сопственици да ги продадат своите удели под истите услови под кои мнозинскиот сопственик продава свој удел.'
            },
            {
              question: 'Зошто се важни договорите за гласање?',
              options: [
                'Затоа што ги заменуваат законите',
                'Затоа што им овозможуваат на малцински сопственици да формираат блокирачко мнозинство',
                'Затоа што се задолжителни со закон',
                'Затоа што го забрануваат гласањето'
              ],
              correctAnswer: 1,
              explanation: 'Договорите за гласање им овозможуваат на малцински сопственици да се здружат и да гласаат заедно, формирајќи блокирачко мнозинство што може да влијае на важни одлуки.'
            }
          ]
        }
      ]
    },

    // ==================== SECTION 7 ====================
    {
      _id: new ObjectId(),
      sectionNumber: 7,
      title: 'Излез од друштвото и ликвидација',
      description: 'Опции за излез, искуп на удел, и ликвидација на друштвото',

      lessons: [
        // Video Lesson
        {
          _id: new ObjectId(),
          lessonNumber: 1,
          title: 'Видео: Излез од друштвото',
          type: 'video',
          videoUrl: 'https://www.youtube.com/watch?v=U3wo9AJFa10',
          duration: '18 min',
          content: ''
        },

        // Content Text 1
        {
          _id: new ObjectId(),
          lessonNumber: 2,
          title: 'Опции за излез од друштвото',
          type: 'text',
          content: `Сопственикот на удел може да сака или да мора да излезе од друштвото од различни причини - несогласување со другите сопственици, потреба за ликвидност, промена на деловни приоритети, или здравствени причини. Постојат неколку опции за излез.

Продажба на удел е најчеста опција. Сопственикот може да го продаде својот удел на постоечките сопственици (internal buyout) или на надворешен купувач (external sale). Продажбата на постоечки сопственици е обично побрза и поедноставна бидејќи не треба одобрување на Собранието, додека продажбата на надворешен купувач подлежи на право на претпочитание и одобрување. Цената се определува со преговори или со независна проценка.

Искуп на удел од страна на друштвото (share buyback) е опција каде самото друштво го откупува уделот од сопственикот. Ова бара одлука на Собранието и исполнување на финансиски услови - друштвото мора да има доволно слободни средства (нераспределена добивка или други резерви) и откупот не смее да го намали капиталот под минималниот износ од 5.000 евра. Откупениот удел се поништува или може да биде чуван како "сопствени удели" и подоцна препродаден.

Намалување на капиталот со враќање на влогот е формална постапка каде капиталот на друштвото се намалува и дел од средствата се враќаат на сопствениците. Ова бара измена на Основачкиот акт, заштита на доверителите (објава и рок за приговори), и одобрување на Собранието со квалификувано мнозинство.

Исклучување на сопственик (exclusion) е екстремна мера која може да се примени во случај на сериозно нарушување на обврски, штетно однесување, или трајна неспособност за учество во друштвото. Ова бара судска постапка и докажување на основа за исклучување.`
        },

        // Content Text 2
        {
          _id: new ObjectId(),
          lessonNumber: 3,
          title: 'Ликвидација на друштвото',
          type: 'text',
          content: `Ликвидацијата е процес на престанок и гасење на друштвото, при што се продаваат сите средства, се плаќаат сите долгови, и преостанатиот капитал се распределува меѓу сопствениците.

Видови на ликвидација се два основни - доброволна и присилна. Доброволната ликвидација настанува кога сопствениците одлучат да го затворат друштвото, обично поради завршување на целта на друштвото, непрофитабилност, или стратешка одлука. Одлуката се донесува на Собрание со квалификувано мнозинство (75%). Присилната ликвидација се наредува од суд во случај на невозможност за исполнување на обврските (инсолвентност), сериозно кршење на законот, или недостаток на законски потребни органи.

Постапката на доброволна ликвидација започнува со одлука на Собранието и именување на ликвидатор. Ликвидаторот ги презема должностите на директорот и е одговорен за спроведување на ликвидацијата. Објава за почеток на ликвидација мора да се изврши во Службен весник и на веб страната на друштвото, со покана до доверителите да ги пријават своите побарувања во рок од 60 дена.

Редослед на плаќања во ликвидација е строго определен со закон: прво се плаќаат трошоците на ликвидација и заработувачките на вработените, потоа даночни обврски, па обврски кон останатите доверители, и најпосле, доколку нешто остане, се распределува меѓу сопствениците пропорционално на нивните удели.

Регистрацијата на бришење на друштвото од Централниот регистар е финална фаза. Ликвидаторот поднесува завршна сметка, доказ за исплатени долгови, и барање за бришење. По бришењето, друштвото престанува да постои како правен субјект.

Алтернативи на ликвидација се спојување со друго друштво или продажба на целото друштво, кои можат да бидат попрофитабилни излезни стратегии.`
        },

        // Section Quiz
        {
          _id: new ObjectId(),
          lessonNumber: 4,
          title: 'Квиз: Излез и ликвидација',
          type: 'quiz',
          questions: [
            {
              question: 'Што е искуп на удел од страна на друштвото (share buyback)?',
              options: [
                'Продажба на удел на надворешен купувач',
                'Откуп на удел од самото друштво',
                'Подарување на удел',
                'Наследување на удел'
              ],
              correctAnswer: 1,
              explanation: 'Искуп на удел (share buyback) е кога самото друштво го откупува уделот од сопственикот, користејќи ги слободните средства на друштвото.'
            },
            {
              question: 'Кој е минималниот износ на основен капитал за ДООЕЛ во Северна Македонија?',
              options: [
                '1.000 евра',
                '5.000 евра',
                '10.000 евра',
                '25.000 евра'
              ],
              correctAnswer: 1,
              explanation: 'Минималниот износ на основен капитал за ДООЕЛ е 5.000 евра според Законот за трговски друштва.'
            },
            {
              question: 'Колкаво мнозинство е потребно за одлука за доброволна ликвидација?',
              options: [
                'Обично мнозинство (50%+1)',
                'Квалификувано мнозинство (75%)',
                'Единогласно (100%)',
                '66%'
              ],
              correctAnswer: 1,
              explanation: 'За одлука за доброволна ликвидација е потребно квалификувано мнозинство од 75% од гласовите на Собранието на сопствениците.'
            },
            {
              question: 'Кој е првиот во редослед на плаќања при ликвидација?',
              options: [
                'Сопствениците на удели',
                'Трошоци на ликвидација и заработувачки на вработени',
                'Обврски кон добавувачи',
                'Даночни обврски'
              ],
              correctAnswer: 1,
              explanation: 'Првенство при ликвидација имаат трошоците на ликвидација и заработувачките на вработените, пред сите други обврски.'
            }
          ]
        }
      ]
    }
  ],

  // ==================== FINAL TEST ====================
  finalTest: {
    _id: new ObjectId(),
    title: 'Финален тест - Удел во друштвото',
    description: 'Комплетен тест за проверка на знаењето за уделите во друштвото. Потребно е 70% точни одговори за добивање сертификат.',
    passingScore: 70,
    maxAttempts: 3,
    timeLimit: 30, // minutes

    questions: [
      // Questions covering all 7 sections
      {
        question: 'Што претставува уделот во ДООЕЛ според македонското законодавство?',
        options: [
          'Материјално добро што може да се тргува на берза',
          'Нематеријално право кое го изразува процентуалното учество во капиталот',
          'Обврзница издадена од друштвото',
          'Заем од сопственикот кон друштвото'
        ],
        correctAnswer: 1,
        section: 1
      },
      {
        question: 'Доколку друштво има основен капитал од 100.000 денари и оствари нето добивка од 20.000 денари, колку дивиденда има право да добие сопственик со 25% удел (доколку Собранието одлучи да се распредели целата добивка)?',
        options: [
          '2.500 денари',
          '5.000 денари',
          '10.000 денари',
          '20.000 денари'
        ],
        correctAnswer: 1,
        section: 2
      },
      {
        question: 'Која форма е потребна за договорот за пренесување на удел?',
        options: [
          'Усна форма е доволна',
          'Пишана форма (препорачлива нотарска заверка)',
          'Само електронска форма',
          'Не е потребна никаква форма'
        ],
        correctAnswer: 1,
        section: 3
      },
      {
        question: 'Колкава е даночната стапка на капитална добивка при продажба на удел за физички лица?',
        options: [
          '10%',
          '15%',
          '18%',
          '20%'
        ],
        correctAnswer: 1,
        section: 4
      },
      {
        question: 'Која метода за вреднување на удел се заснова на идните проектирани парични текови?',
        options: [
          'Книговодствена метода',
          'DCF (Discounted Cash Flow) метода',
          'Ликвидациона метода',
          'Историска метода'
        ],
        correctAnswer: 1,
        section: 5
      },
      {
        question: 'Што овозможува drag-along клаузулата во акционерски договор?',
        options: [
          'Малцинските сопственици да ги принудат мнозинските да продадат',
          'Мнозинскиот сопственик да ги принуди малцинските да продадат при продажба на целото друштво',
          'Директорот да продаде удели без согласност',
          'Автоматско пренесување на удели'
        ],
        correctAnswer: 1,
        section: 6
      },
      {
        question: 'Колкав е минималниот основен капитал за ДООЕЛ во Македонија?',
        options: [
          '1.000 евра',
          '5.000 евра',
          '10.000 евра',
          '25.000 евра'
        ],
        correctAnswer: 1,
        section: 7
      },
      {
        question: 'Кој орган е одговорен за одобрување на пренесување на удел на надворешно лице?',
        options: [
          'Директорот',
          'Собранието на сопствениците',
          'Централниот регистар',
          'Даночната управа'
        ],
        correctAnswer: 1,
        section: 3
      },
      {
        question: 'Зошто малцинските удели се продаваат со дисконт?',
        options: [
          'Затоа што се помали',
          'Затоа што купувачот нема контрола врз друштвото',
          'Затоа што законот го бара',
          'Затоа што не носат право на дивиденда'
        ],
        correctAnswer: 1,
        section: 5
      },
      {
        question: 'Колкаво мнозинство е потребно за одлука за доброволна ликвидација на друштвото?',
        options: [
          'Обично мнозинство (50%+1)',
          'Квалификувано мнозинство (75%)',
          'Единогласно (100%)',
          '66%'
        ],
        correctAnswer: 1,
        section: 7
      }
    ]
  }
};

async function insertCourse() {
  let client;

  try {
    console.log('Connecting to MongoDB...');
    client = await MongoClient.connect(MONGODB_URI);
    const db = client.db();

    console.log('Inserting course: "Удел во друштвото"...');

    // Insert course
    const result = await db.collection('courses').insertOne(courseData);

    console.log('✅ Course inserted successfully!');
    console.log('Course ID:', result.insertedId);
    console.log('Course Slug:', courseData.slug);
    console.log('Total Sections:', courseData.sections.length);
    console.log('Total Lessons:', courseData.sections.reduce((sum, s) => sum + s.lessons.length, 0));
    console.log('Final Test Questions:', courseData.finalTest.questions.length);

    console.log('\n📚 Course Structure:');
    courseData.sections.forEach(section => {
      console.log(`\nSection ${section.sectionNumber}: ${section.title}`);
      section.lessons.forEach(lesson => {
        console.log(`  - Lesson ${lesson.lessonNumber}: ${lesson.title} (${lesson.type})`);
      });
    });

    console.log('\n✅ Course "Удел во друштвото" is ready!');
    console.log(`Access at: /terminal/courses/${courseData.slug}`);

  } catch (error) {
    console.error('❌ Error inserting course:', error);
    throw error;
  } finally {
    if (client) {
      await client.close();
      console.log('\nMongoDB connection closed.');
    }
  }
}

// Run if executed directly
if (require.main === module) {
  insertCourse()
    .then(() => process.exit(0))
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
}

module.exports = { courseData, insertCourse };
